ğŸŒ TFK Assurance API Gateway Design (Phase III - Scaling)Dieses Dokument definiert die Architektur und die Endpunkte fÃ¼r das zentrale Assurance API Gateway. Das Gateway dient als einheitliche, skalierbare und performante Schnittstelle fÃ¼r alle Daten, die das Triple Signed Trust (TFK) Framework generiert (Heartbeat, Manifest-IntegritÃ¤t, Anchor-Status).ğŸ¯ ArchitekturzieleKonsolidierung: Alle TFK-Daten sind Ã¼ber einen einzigen Endpunkt zugÃ¤nglich.Performance: Implementierung von Caching auf Gateway-Ebene, um die Last auf die nachgelagerten AWS Lambda-Funktionen und S3 zu reduzieren.Skalierbarkeit: Nutzung von AWS API Gateway und Lambda (Serverless) fÃ¼r elastische Skalierung.Sicherheit: Einheitliches Rate Limiting und API Key Governance.ğŸ—ï¸ Technischer StackAPI Gateway: AWS API Gateway (REST API)Backend-Logik: AWS Lambda (Node.js/Python)Datenspeicher: AWS DynamoDB (fÃ¼r aggregierte Heartbeat-Status und Caching-Metadaten)ğŸ“Œ Definierte Endpunkte und LogikDie Endpunkte sind so konzipiert, dass sie sowohl schnelle Statusabfragen (fÃ¼r das Frontend) als auch detaillierte Verifizierungsdaten (fÃ¼r Auditoren) unterstÃ¼tzen.MethodeEndpunktBeschreibungCaching-StrategieGET/v1/status/heartbeatAggregierter Heartbeat-Status. Gibt den aktuellsten, aggregierten IntegritÃ¤ts-Status des gesamten TFK-Stacks zurÃ¼ck (einfacher JSON-Response: {"status": "OK" / "FAIL", "timestamp": ...}). Ruft den letzten Eintrag aus dem Heartbeat Stack Log (DynamoDB/S3) ab.30 Sekunden (hohe Frequenz)GET/v1/covenant/manifestAbruf des Living Archive Manifests. Gibt den Inhalt der workshop-manifest.yaml und die zugehÃ¶rige GPG-Signatur (.yaml.asc) zurÃ¼ck.5 Minuten (Manifest Ã¤ndert sich selten)GET/v1/covenant/anchorsStatus der Dual-Chain Anchors. Liefert die Verifizierungsdetails der letzten Bitcoin (TXID) und Ethereum (Contract) Transaktionen, einschlieÃŸlich Zeitstempel.60 Sekunden (mittlere Frequenz)POST/v1/governance/verifyOn-Demand-IntegritÃ¤tsprÃ¼fung. Erlaubt autorisierten Nutzern, eine sofortige, vollstÃ¤ndige TFK-IntegritÃ¤tsprÃ¼fung auszulÃ¶sen (startet die AWS Step Function). BenÃ¶tigt API Key.Kein CachingGET/v1/logs/auditAbruf des vollstÃ¤ndigen Audit-Logs. Gibt die letzten 100 EintrÃ¤ge des Heartbeat Stack Logs (S3/DynamoDB) zurÃ¼ck.10 Sekunden (fÃ¼r dynamische Anzeige)ğŸ”’ Governance und Sicherheit1. Rate LimitingUnauthentifizierte Anfragen (GET): BeschrÃ¤nkt auf 10 Anfragen pro Sekunde pro IP.Authentifizierte Anfragen (POST/GET): HÃ¶here Limits, basierend auf API Key.2. CachingDas Caching wird direkt im AWS API Gateway konfiguriert, um die Latenz zu minimieren.Cache-Keys basieren auf dem Endpunkt und optionalen Query-Parametern.Der Cache wird nach Ablauf des definierten Zeitfensters (TTL) automatisch invalidiert.3. Error HandlingStandardisierte JSON-Fehlerantworten (z.B. HTTP 500 bei Step Function Failure, 404 bei Manifest-Fehler, 429 bei Rate Limiting).ğŸš€ Implementierungs-Roadmap (NÃ¤chste Schritte)Lambda-Funktionen: Erstellung von dedizierten Lambda-Funktionen, die die aktuellen Heartbeat-Daten aus S3/DynamoDB abrufen und formatieren.DynamoDB Integration: Design der DynamoDB-Tabelle zur Speicherung des aktuellen TFK-Status-Aggregats (fÃ¼r schnellen /status-Abruf).API Gateway Deployment: Konfiguration des Caching und Rate Limiting im API Gateway
